<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>  
    <class name="org.LexGrid.relations.AssociationData" table="entityAssnsToData" lazy="false">
     
     <cache usage="read-write"/>
   		<composite-id class="org.LexGrid.LexBIG.caCore.hibernate.compositeKeys.EntityAssnsToDataKey">
            <key-property name="codingSchemeName"/>
            <key-property name="containerName"/>
            <key-property name="entityCodeNamespace"/>
            <key-property name="entityCode"/>
            <key-property name="sourceEntityCodeNamespace"/>
            <key-property name="sourceEntityCode"/>
       </composite-id>    
	
		<!-- AssociationData -->		    	
    	<one-to-one name="_associationDataText" access="field" class="org.LexGrid.commonTypes.Text$AssociationData">
 			<formula>codingSchemeName</formula>
       		<formula>containerName</formula>
       		<formula>entityCodeNamespace</formula>
       		<formula>entityCode</formula>
       		<formula>sourceEntityCodeNamespace</formula>    
       		<formula>sourceEntityCode</formula>    
       </one-to-one>
		
		<!-- AssociationableElement -->
 		<property name="_associationInstanceId" insert="false" update="false" access="field" type="string" column="associationInstanceId" />
		<property name="_isInferred" insert="false" update="false" access="field" type="boolean" column="isInferred" />
		<property name="_isDefining" insert="false" update="false" access="field" type="boolean" column="isDefining" />	


		<bag name="_usageContextList" access="field" table="entityPropertyMultiAttrib" where="typeName = 'usageContext'" lazy="false">  
			 <key>	
			 	<column name="codingSchemeName"/>
        		<column name="entityCodeNamespace"/>
        		<column name="entityCode"/>
        		<column name="propertyId"/> 
        		<column name="typeName"/>
        		<column name="val1"/> 
			 </key>
			<element type="string" column="attributeValue"/>
		</bag> 
	
	
		  <bag name="_associationQualificationList" table="entityAssnsToData" access="field" lazy="true">  
			 <key>
			  	<column name="codingSchemeName"/>
            	<column name="containerName"/>
            	<column name="entityCodeNamespace"/>
            	<column name="entityCode"/>
           	 	<column name="sourceEntityCodeNamespace"/>
            	<column name="sourceEntityCode"/>         	
			 </key>
			<many-to-many  class="org.LexGrid.relations.AssociationQualification">
				<formula>multiAttributesKey</formula>				
			</many-to-many>
			</bag> 

		<!-- Versionable -->
		<property name="_isActive" insert="false" update="false" access="field" type="boolean" column="isActive" />

		<property name="_status" access="field" lazy="true">
			<formula>(select @PREFIX@entryState.status from @PREFIX@entryState where
			 @PREFIX@entryState.entryStateId = entryStateId)</formula>
		</property>
		
		<property name="_effectiveDate" type="date" access="field" lazy="true">
			<formula>(select @PREFIX@entryState.effectiveDate from @PREFIX@entryState where
			 @PREFIX@entryState.entryStateId = entryStateId)</formula>
		</property>
		
		<property name="_expirationDate" type="date" access="field" lazy="true">
			<formula>(select @PREFIX@entryState.expirationDate from @PREFIX@entryState where
			 @PREFIX@entryState.entryStateId = entryStateId)</formula>
		</property>
		
		<many-to-one name="_owner" access="field" not-found="ignore"
			class="org.LexGrid.commonTypes.Source$EntryState">
			<formula>entryStateId</formula>
		</many-to-one>
		 
		<many-to-one name="_entryState" access="field" not-found="ignore"
			class="org.LexGrid.versions.EntryState">
			<formula>entryStateId</formula>
		</many-to-one>	
    </class>       
        
        <class name="org.LexGrid.commonTypes.Text" table="entityAssnsToData" 
    		entity-name="org.LexGrid.commonTypes.Text$AssociationData">
        <composite-id class="org.LexGrid.LexBIG.caCore.hibernate.compositeKeys.EntityAssnsToDataKey">
       		<key-property name="codingSchemeName"/>
            <key-property name="containerName"/>
            <key-property name="entityCodeNamespace"/>
            <key-property name="entityCode"/>
            <key-property name="sourceEntityCodeNamespace"/>
            <key-property name="sourceEntityCode"/>    
        </composite-id> 
        <property name="_content" access="field" update="false" insert="false" column="dataValue"/>  
    </class>
</hibernate-mapping>


